## ğŸƒ blobì´ë€?

### blobì´ë€ ë¬´ì—‡ì¼ê¹Œ?

ì–´ë””ì„œ ì²˜ìŒ blobì„ ë³´ì…¨ë‚˜ìš”? ì €ëŠ” ê°™ì´ í”„ë¡œì íŠ¸ë¥¼ í•˜ë˜ íŒ€ì›ì´ ì‚¬ì§„ì„ ì €ì¥í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤ê³  í•´ì„œ ì²˜ìŒ ë³´ì•˜ìŠµë‹ˆë‹¤. ê·¸ ì „ê¹Œì§€ íŒŒì¼ì€ í”„ë¡œì íŠ¸ì˜ í•œ í´ë”ì— ë”°ë¡œ ì €ì¥í•˜ê³  ê·¸ ì£¼ì†Œë¥¼ DBì— ì €ì¥í•œë‹¤ê³ ë§Œ ìƒê°í•˜ê³  ìˆì—ˆëŠ”ë° í•˜ë‚˜ë¡œ ì €ì¥í•˜ë‹ˆ ì•„ë¬´ë˜ë„ ê´€ë¦¬í•  ë¶€ë¶„ì´ ì ì–´ì§€ë‹ˆ í›¨ì”¬ í¸í•˜ë”êµ°ìš”. ê·¸ ì´í›„ ì €ëŠ” blobì´ ë‹¨ìˆœíˆ ì‚¬ì§„ì„ ì €ì¥í•˜ëŠ” ìë£Œí˜•ì´ë¼ê³  ìƒê°í•´ë²„ë ¸ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìµœê·¼ í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ í›¨ì”¬ ë‹¤ì–‘í•˜ê²Œ í™œìš©ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì œê°€ íŒŒì•…í•œ í•œë„ ë‚´ì—ì„œ blobë¥¼ ì†Œê°œí•˜ê³ ì í•©ë‹ˆë‹¤.

> ì–´ë–»ê²Œ ì½ì„ê¹Œ?

blobì€ ì–´ë–»ê²Œ ì½ì„ê¹Œìš”? ì €ëŠ” ì²˜ìŒì—ëŠ” 'ë¸”ë¡­'ì´ë¼ê³  ì½ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ 'ë¸”ë' ë˜ëŠ” 'ë¸”ë¡­'ì´ë¼ê³  ì½íˆëŠ” ê²½ìš°ë„ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ê²Œ blob ë¿ ì•„ë‹ˆë¼ clob ë“±ë„ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ 'ë¹„ë', 'ì‹œë'ì²˜ëŸ¼ ì½ëŠ”ë‹¤ê³ ë„ í•©ë‹ˆë‹¤. ì•„ë§ˆ ì •í™•í•˜ê²Œ ì½ëŠ” ë²•ê¹Œì§€ëŠ” ì§€ì •ë˜ì§€ ì•Šì€ ê²ƒ ê°™ìœ¼ë‹ˆ ì˜ë¯¸ê°€ í†µí•˜ëŠ” í•œë„ ë‚´ì—ì„œ ììœ ë¡­ê²Œ ì“°ë©´ ë˜ì§€ ì•Šì„ê¹Œ í•©ë‹ˆë‹¤.

> ì–´ë””ì— ì“¸ê¹Œ?

blobì€ Binary Large Objectì˜ ì•½ìì…ë‹ˆë‹¤. ì´ë¦„ì—ì„œ ë°”ì´ë„ˆë¦¬ í˜•íƒœë¡œ í° ê°ì²´ë¥¼ ì €ì¥í•  ê²ƒì´ë¼ëŠ” ê²ƒì„ ì¶”ì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´ í° ê°ì²´ë¼ëŠ” ê²ƒì€ ì£¼ë¡œ ì´ë¯¸ì§€, ë¹„ë””ì˜¤, ì‚¬ìš´ë“œ ë“±ê³¼ ê°™ì€ ë©€í‹°ë¯¸ë””ì–´ ê°ì²´ë“¤ì„ ì£¼ë¡œ ê°€ë¦¬í‚µë‹ˆë‹¤.

> ì–´ë–»ê²Œ ì €ì¥í• ê¹Œ?

blobì˜ ê²½ìš° 4GBì˜ ì´ì§„ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê±´ DBì— ì§ì ‘ ì €ì¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ DBì—ëŠ” Large Objectì˜ ìœ„ì¹˜ í¬ì¸í„°ë§Œ ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤. ì €ëŠ” DBì„±ëŠ¥ì´ ì¢‹ì•„ì ¸ì„œ ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë„ ê·¸ëƒ¥ ë§‰ ë„£ì„ ìˆ˜ ìˆê²Œ ëœ ì¤„ ì•˜ì—ˆë”ë‹ˆ ê·¸ê±´ ì•„ë‹ˆêµ°ìš”.

> javascriptì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í• ê¹Œ?

```
var blob = new Blob([typedArray], {type: 'application/octet-binary'});

var audioBlob = new Blob([dataview], { type: type });
```



ìœ„ì™€ ê°™ì´ ë°°ì—´ê³¼ íƒ€ì…ì„ ë„£ì–´ì„œ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```
var url = URL.createObjectURL(blob);

var url = URL.createObjectURL(audioBlob);
```



ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ URLì„ ìƒì„±í•  ìˆ˜ ìˆëŠ”ë° ì´ URLì„ <a></a>(ì•µì»¤) íƒœê·¸ì— ì—°ê²°ì‹œí‚¤ë©´ ë‹¤ìš´ë¡œë“œë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìš´ë¡œë“œë¼ê³ ëŠ” í•˜ì§€ë§Œ ì„œë²„ì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œë¥¼ ë°›ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¸Œë¼ìš°ì € ìƒì— ì €ì¥ë˜ì–´ ìˆëŠ” blobíŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ê²Œ ë©ë‹ˆë‹¤.

```
var reader = new FileReader();

reader.readAsArrayBuffer(blob);
```



blobíŒŒì¼ì€ FileReaderë¥¼ í†µí•´ì„œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> DBì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í• ê¹Œ?

DBì— blob ë°ì´í„° í˜•ì€ ì´ë ‡ê²Œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¶œì²˜: [ë””ë”¤ëŒ](http://stepping.tistory.com/30))

```
String query = "UPDATE TABLE SET BLOB_DATA = EMPTY_BLOB()";
stmt.executeUpdate(query);
if(rs.next()){
    BLOB blob = null;
    BufferedOutputStream out = null;
    BufferedInputStream in = null;
    byte[] nuf = null;
    int byteRead = 0;

    blob = ((OracleResultSet)rs).getBLOB(1);
    out = new BufferedOutputStream(blob.getBinaryOutputStream());
    in = new BufferedInputStream(new StringBufferInputStream(str));
    int nFileSize = (int)str.length();
    buf = new byte[nFileSize];

    while((bytesRead = in.read(buf)) != -1){
        out.write(buf, 0, bytesRead);
    }
    
    in.close();
    out.close();
}

dbconn.commit();
dbConn.setAutocommit(true); 
```



ê·¸ë¦¬ê³  ë‹¤ìŒì²˜ëŸ¼ DBì—ì„œ blob ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
//SELECT
String query = "SELECT CLOB_DATA FROM TABLE WHERE~";
stmt = dbConn.createStatement();
rs = stmt.executeQuery(query);
if(rs.next()){
    BLOB blob = ((OracleResultSet)rs).getBLOB(1);
    BufferedInputStream in = new BufferedInputStream(blob.getBinaryStream());
    int nFileSize = (int)blob.length();
    byte[] buf = new byte[nFileSize];
    int nReadSize = in.read(buf, 0, nFileSize);
    in.close();
    
    //contents -> BLOBë°ì´í„°ê°€ ì €ì¥ë  String
    String contents = new String(buf);
```



blob í˜•ì‹ì„ í™œìš©í•´ì„œ ì¢‹ì€ ë¯¸ë””ì–´ ìë£Œë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ ë§Œë“¤ê¸°ì— ë„ì „í•´ë³´ë©´ ì–´ë–¨ê¹Œìš”? :)

<br>

<br>

#### ì°¸ê³ ë§í¬: [blobì´ë€ ë¬´ì—‡ì¼ê¹Œ? : ë„¤ì´ë²„ ë¸”ë¡œê·¸ (naver.com)](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=magnking&logNo=220950061851)

<br>